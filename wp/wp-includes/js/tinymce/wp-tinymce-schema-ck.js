/**
 * TinyMCE Schema.js
 *
 * Duck-punched by WordPress core to support a sane schema superset.
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */(function(e){function i(e,t){return e.split(t||",")}function s(e,t){function o(t){return t.replace(/[A-Z]+/g,function(t){return o(e[t])})}var r,s={};for(r in e)e.hasOwnProperty(r)&&(e[r]=o(e[r]));o(t).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(e,t,r,o){r=i(r,"|");s[t]={attributes:n(r),attributesOrder:r,children:n(o,"|",{"#comment":{}})}});return s}function o(){var e=t.html5;e||(e=t.html5=s({A:"accesskey|class|contextmenu|dir|draggable|dropzone|hidden|id|inert|itemid|itemprop|itemref|itemscope|itemtype|lang|spellcheck|style|tabindex|title|translate|item|role|subject|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"#|a|abbr|area|audio|b|bdi|bdo|br|button|canvas|cite|code|command|data|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|math|meta|meter|noscript|object|output|progress|q|ruby|s|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|u|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdi|bdo|blockquote|br|button|canvas|cite|code|command|data|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|math|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|s|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|u|ul|var|video|wbr"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes|crossorigin|hreflang][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async|crossorigin][#]noscript[A][C]body[A|onafterprint|onbeforeprint|onbeforeunload|onblur|onerror|onfocus|onfullscreenchange|onfullscreenerror|onhashchange|onload|onmessage|onoffline|ononline|onpagehide|onpageshow|onpopstate|onresize|onscroll|onstorage|onunload][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A|open][C|dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][C|B]dd[A][C]a[A|href|target|download|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]s[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]u[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdi[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][C|B]del[A|cite|datetime][C|B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|srcset|crossorigin|usemap|ismap|width|height][]iframe[A|name|src|srcdoc|height|width|sandbox|seamless|allowfullscreen][C|B]embed[A|src|height|width|type][]object[A|data|type|typemustmatch|name|usemap|form|width|height][C|B|param]param[A|name|value][]summary[A][B]details[A|open][C|legend|summary]command[A|type|label|icon|disabled|checked|radiogroup|command][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]track[A|kind|src|srclang|label|default][]audio[A|src|autobuffer|autoplay|loop|controls|crossorigin|preload|mediagroup|muted][C|source|track]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster|crossorigin|preload|mediagroup|muted][C|source|track]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|autofocus|checked|dirname|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|inputmode|list|max|maxlength|min|multiple|name|pattern|placeholder|readonly|required|size|src|step|value|width|files][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|type|value][B]select[A|autofocus|disabled|form|multiple|name|required|size][option|optgroup]data[A|value][B]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][#]textarea[A|autocomplete|autofocus|cols|dirname|disabled|form|inputmode|maxlength|name|placeholder|readonly|required|rows|wrap][#]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][a|button|input]map[A|name][C|B]area[A|alt|coords|shape|href|target|download|ping|rel|media|hreflang|type][]math[A][]svg[A][]table[A][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][C]td[A|headers|rowspan|colspan][C]wbr[A][]"));return e}function u(){var e=t.html4;e||(e=t.html4=s({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"));return e}function a(){var n=t,i,s;if(t.sane)return t.sane;t={};i=o();s=u();t=n;r(s,function(t,n){var s=i[n],o=[];if(!s){i[n]=t;return}r(t.attributes,function(e,t){s.attributes[t]||(s.attributes[t]=e)});r(t.attributesOrder,function(t){-1===e.inArray(s.attributesOrder,t)&&o.push(t)});s.attributesOrder=s.attributesOrder.concat(o);r(t.children,function(e,t){s.children[t]||(s.children[t]=e)})});return t.sane=i}var t={},n=e.makeMap,r=e.each;e.html.Schema=function(s){function E(r,i,o){var u=s[r];if(!u){u=t[r];if(!u){u=n(i," ",n(i.toUpperCase()," "));u=e.extend(u,o);t[r]=u}}else u=n(u,",",n(u.toUpperCase()," "));return u}function S(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function x(t){var r,s,o,u,a,l,h,p,d,v,m,g,y,b,w,E,x,T,N,C,k,L,A=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,O=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,M=/[*?+]/;if(t){t=i(t);if(f["@"]){x=f["@"].attributes;T=f["@"].attributesOrder}for(r=0,s=t.length;r<s;r++){l=A.exec(t[r]);if(l){w=l[1];v=l[2];E=l[3];d=l[4];y={};b=[];h={attributes:y,attributesOrder:b};w==="#"&&(h.paddEmpty=!0);w==="-"&&(h.removeEmpty=!0);if(x){for(C in x)y[C]=x[C];b.push.apply(b,T)}if(d){d=i(d,"|");for(o=0,u=d.length;o<u;o++){l=O.exec(d[o]);if(l){p={};g=l[1];m=l[2].replace(/::/g,":");w=l[3];L=l[4];if(g==="!"){h.attributesRequired=h.attributesRequired||[];h.attributesRequired.push(m);p.required=!0}if(g==="-"){delete y[m];b.splice(e.inArray(b,m),1);continue}if(w){if(w==="="){h.attributesDefault=h.attributesDefault||[];h.attributesDefault.push({name:m,value:L});p.defaultValue=L}if(w===":"){h.attributesForced=h.attributesForced||[];h.attributesForced.push({name:m,value:L});p.forcedValue=L}w==="<"&&(p.validValues=n(L,"?"))}if(M.test(m)){h.attributePatterns=h.attributePatterns||[];p.pattern=S(m);h.attributePatterns.push(p)}else{y[m]||b.push(m);y[m]=p}}}}if(!x&&v=="@"){x=y;T=b}if(E){h.outputName=v;f[E]=h}if(M.test(v)){h.pattern=S(v);c.push(h)}else f[v]=h}}}}function T(e){f={};c=[];x(e);r(p,function(e,t){l[t]=e.children})}function N(e){var t=/^(~)?(.+)$/;e&&r(i(e),function(e){var n=t.exec(e),i=n[1]==="~",s=i?"span":"div",o=n[2];l[o]=l[s];w[o]=s;if(!i){y[o.toUpperCase()]={};y[o]={}}f[o]||(f[o]=f[s]);r(l,function(e,t){e[s]&&(e[o]=e[s])})})}function C(e){var t=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&r(i(e),function(e){var n=t.exec(e),s,o;if(n){o=n[1];o?s=l[n[2]]:s=l[n[2]]={"#comment":{}};s=l[n[2]];r(i(n[3],"|"),function(e){o==="-"?delete s[e]:s[e]={}})}})}function k(e){var t=f[e],n;if(t)return t;n=c.length;while(n--){t=c[n];if(t.pattern.test(e))return t}}var o=this,f={},l={},c=[],h,p,d,v,m,g,y,b,w={};s=s||{};p=s.schema=="html5"?a():u();s.verify_html===!1&&(s.valid_elements="*[*]");if(s.valid_styles){h={};r(s.valid_styles,function(t,n){h[n]=e.explode(t)})}d=E("whitespace_elements","pre script noscript style textarea");v=E("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");m=E("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr");g=E("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");b=E("non_empty_elements","td th iframe video audio object",m);textBlockElementsMap=E("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");y=E("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",textBlockElementsMap);if(!s.valid_elements){r(p,function(e,t){f[t]={attributes:e.attributes,attributesOrder:e.attributesOrder};l[t]=e.children});s.schema!="html5"&&r(i("strong/b,em/i"),function(e){e=i(e,"/");f[e[1]].outputName=e[0]});f.img.attributesDefault=[{name:"alt",value:""}];r(i("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(e){f[e]&&(f[e].removeEmpty=!0)});r(i("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(e){f[e].paddEmpty=!0})}else T(s.valid_elements);N(s.custom_elements);C(s.valid_children);x(s.extended_valid_elements);C("+ol[ul|ol],+ul[ul|ol]");s.invalid_elements&&e.each(e.explode(s.invalid_elements),function(e){f[e]&&delete f[e]});k("span")||x("span[!data-mce-type|*]");o.children=l;o.styles=h;o.getBoolAttrs=function(){return g};o.getBlockElements=function(){return y};o.getTextBlockElements=function(){return textBlockElementsMap};o.getShortEndedElements=function(){return m};o.getSelfClosingElements=function(){return v};o.getNonEmptyElements=function(){return b};o.getWhiteSpaceElements=function(){return d};o.isValidChild=function(e,t){var n=l[e];return!!n&&!!n[t]};o.isValid=function(e,t){var n,r,i=k(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;n=i.attributePatterns;if(n){r=n.length;while(r--)if(n[r].pattern.test(e))return!0}}return!1};o.getElementRule=k;o.getCustomElements=function(){return w};o.addValidElements=x;o.setValidElements=T;o.addCustomElements=N;o.addValidChildren=C;o.elements=f}})(tinymce);